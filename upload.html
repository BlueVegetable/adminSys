<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>上传文件</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="Content-Type" content="multipart/form-data;charset=utf-8" />
    <link rel="stylesheet" href="./css/x-admin.css" media="all">

    <script src="./lib/layui/layui.js" charset="utf-8"></script>
    <script src="./js/x-layui.js" charset="utf-8"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="js/url.js" type="text/javascript"></script>
    <script>
        window.onload=function () {
            $.ajax({
                url:remoteURL+"/Area/selectAll",
                dataType:'json',
                type:'post',
                success:function(data){
                    $.each(data,function(index,data){
                        $('#cityId').append(new Option(data.city,data.id));// 下拉菜单里添加元素
                    })
                    renderForm();//下拉菜单渲染 把内容加载进去
                }
            });
        }
        function renderForm(){
            layui.use('form', function(){
                var form = layui.form();//高版本建议把括号去掉，有的低版本，需要加()
                form.render();
            });
        }
        function up(){
            var formData = new FormData($('#myform')[0]);
            alert(remoteURL+"/Banner/addBanner");
            $.ajax({
                url: remoteURL+"/Banner/addBanner",
                type: 'POST',
                cache: false,
                data: formData,
                processData: false,
                contentType: false,
                success:function(res){
                    alert(1);
                    if(res==1)
                        layer.alert("添加成功");
                    else
                        layer.alert("添加失败");
                },
                error:function(res) {
                    alert(JSON.stringify(formData));
                    layer.alert(JSON.stringify(res));
                }
            });
        }
    </script>
</head>
<body>
<div class="x-body">
    <form class="layui-form" id="myform" enctype="multipart/form-data">
        <div class="layui-form-item">
            <label class="layui-form-label">
                <span class="x-red">*</span>轮播图
            </label>
            <div class="layui-upload">
                <input type="file" name="file" id="s_pmt_dw" style="width:190px">
                <div class="layui-upload-list" id="demo2"></div>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">
                <span class="x-red">*</span>地址
            </label>
            <div class="layui-input-inline">
                <select name="cityId" id="cityId">
                    <option value="">请选择地址</option>
                </select>
            </div>
        </div>
        <div class="layui-form-item">
            <label class="layui-form-label">
            </label>
            <button  class="layui-btn" onclick="up()">
                增加
            </button>
        </div>
    </form>
</div>
</body>
</html>